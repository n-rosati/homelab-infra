apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: clusterissuer
    namespace: clusterissuer
spec:
    interval: 15m
    chart:
        spec:
            chart: clusterissuer
            version: 9.2.2
            sourceRef:
                kind: HelmRepository
                name: truecharts
                namespace: flux-system
    releaseName: clusterissuer
    values:
        clusterIssuer:
            selfSigned:
                enabled: true
                name: selfsigned
            ACME:
                - cfapitoken: ${CF_CLUSTERISSUER_TOKEN}
                  cfapikey: ""
                  email: ${EMAIL}
                  name: le-prod
                  server: 'https://acme-v02.api.letsencrypt.org/directory'
                  type: cloudflare
                - cfapitoken: ${CF_CLUSTERISSUER_TOKEN}
                  cfapikey: ""
                  email: ${EMAIL}
                  name: le-staging
                  server: 'https://acme-staging-v02.api.letsencrypt.org/directory'
                  type: cloudflare
